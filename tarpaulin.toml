# Tarpaulin Configuration for Mimir
# https://github.com/xd009642/tarpaulin

[general]
# Workspace members to cover (exclude the Tauri UI crate)
packages = ["mimir-core"]

# Run tests single-threaded to avoid SQLite locking issues
implicit-test-threads = true

# Timeout per test in seconds
timeout = "120s"

# Output directory for reports
output-dir = "target/coverage"

[report]
# Generate both HTML for viewing and XML for CI processing
out = ["Html", "Xml"]

[coverage]
# Exclude test code from coverage metrics
exclude-files = [
    # Test files
    "*/tests/*",
    "**/tests/*",

    # Generated schema file
    "**/schema.rs",

    # Build scripts
    "**/build.rs",

    # Example code
    "*/examples/*",
]

# Exclude test modules from coverage
ignore-tests = true

# Minimum coverage threshold (conservative global setting)
# Per-package thresholds are enforced in CI workflow
fail-under = 50
